<%= ul_nav (
      (@virtual_tags.map { |slug| [tag_badge(slug, account: @account, html_tag: 'span'), "/u/#{@account.id}/tags/#{slug}"] }) +
      (tags = @account.tags.sort_by { |tag| -tag.holding }).map { |tag| [tag_badge(tag, html_tag: 'span'), "/u/#{@account.id}/tags/#{tag.name}"] } +
      [[tag_badge('overview', account: @account, html_tag: 'span'), "/u/#{@account.id}/tags"]]
    ),
    ul_class: 'nav nav-tabs',
    li_class: 'nav-item',
    li_active_class: nil,
    a_class: 'nav-link',
    a_active_class: 'active',
    ul_id: 'coins-ul',
    generate_subnav_href_and_ul: false
%>

<div class="mt-3">
  <% total_holding = @account.tags.holding %>
  <%= tags.map { |tag|
    if tag.holding
      relative_holding = tag.holding / total_holding
      %{<a href="/u/#{@account.id}/tags/#{tag.name}" data-toggle="tooltip" title="#{tag.name}" class="text-center d-inline-block" style="color: white; background-color: #{tag.background_color || '#6C757D'}; width: #{relative_holding*100}%"><span class="d-inline-block p-1">#{number_to_percentage relative_holding*100, precision: 1}</span></a>}
    end
}.compact.join %>
</div>
